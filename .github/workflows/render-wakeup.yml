name: Wake Render & Trigger Inventory Sync

on:
  workflow_dispatch:   # åªå…è¨±æ‰‹å‹•åŸ·è¡Œ

# on:
#   schedule:
#     - cron: '00 * * * *'  # æ¯å°æ™‚ UTC 55 åˆ† = å°ç£æ™‚é–“ 03 åˆ†

jobs:
  ping_and_sync:
    runs-on: ubuntu-latest

    steps:
      - name: ðŸ”” Wake up Render app
        run: |
          curl -s https://sec-6pep.onrender.com > /dev/null
          echo "âœ… Render app pinged"

      - name: ðŸš€ Trigger /sync with secure header
        run: |
          curl -X POST https://sec-6pep.onrender.com/sync \
            -H "x-api-key: ${{ secrets.RUN_INVENTORY_SYNC_SECRET }}"
          echo "âœ… Inventory sync triggered"